<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logo Hash Generator - Fisher Backflows</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #0a0a0a;
            color: #ffffff;
        }
        .container {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 30px;
        }
        h1 {
            background: linear-gradient(to right, #ffffff, #3b82f6);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
            margin-bottom: 30px;
        }
        .step {
            background: rgba(59,130,246,0.1);
            border: 1px solid rgba(59,130,246,0.2);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        input[type="file"] {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 6px;
            color: white;
            padding: 10px;
            width: 100%;
        }
        .output {
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 6px;
            padding: 15px;
            font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            word-break: break-all;
        }
        .copy-btn {
            background: linear-gradient(to right, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            cursor: pointer;
            margin-left: 10px;
        }
        .copy-btn:hover {
            background: linear-gradient(to right, #2563eb, #1e40af);
        }
        .success {
            color: #10b981;
        }
        .error {
            color: #ef4444;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¨ Logo Hash Generator</h1>
        <p>Generate SHA-256 hash for logo integrity validation in Fisher Backflows website.</p>

        <div class="step">
            <h3>Step 1: Select Your Logo File</h3>
            <input type="file" id="logoFile" accept="image/*" />
        </div>

        <div class="step">
            <h3>Step 2: Generated Values</h3>
            <p><strong>Base64 Data URI:</strong> 
                <button class="copy-btn" onclick="copyToClipboard('base64Output')">Copy</button>
            </p>
            <div id="base64Output" class="output">Upload a logo file to generate...</div>
            
            <p><strong>SHA-256 Hash:</strong> 
                <button class="copy-btn" onclick="copyToClipboard('hashOutput')">Copy</button>
            </p>
            <div id="hashOutput" class="output">Upload a logo file to generate...</div>
        </div>

        <div class="step">
            <h3>Step 3: Update Logo.tsx</h3>
            <p>Copy these values into <code>src/components/ui/Logo.tsx</code>:</p>
            <div id="codeOutput" class="output">Upload a logo file to generate code...</div>
        </div>
    </div>

    <script>
        document.getElementById('logoFile').addEventListener('change', async function(e) {
            const file = e.target.files[0];
            if (!file) return;

            try {
                // Convert to base64
                const reader = new FileReader();
                reader.onload = async function(e) {
                    const dataUri = e.target.result;
                    const base64 = dataUri.split(',')[1];
                    
                    // Generate SHA-256 hash
                    const raw = Uint8Array.from(atob(base64), c => c.charCodeAt(0));
                    const hash = await crypto.subtle.digest('SHA-256', raw);
                    const hex = Array.from(new Uint8Array(hash))
                        .map(b => b.toString(16).padStart(2, '0'))
                        .join('');

                    // Get image dimensions
                    const img = new Image();
                    img.onload = function() {
                        updateOutputs(dataUri, hex, img.width, img.height);
                    };
                    img.src = dataUri;
                };
                reader.readAsDataURL(file);

            } catch (error) {
                document.getElementById('base64Output').innerHTML = `<span class="error">Error: ${error.message}</span>`;
                document.getElementById('hashOutput').innerHTML = `<span class="error">Error: ${error.message}</span>`;
            }
        });

        function updateOutputs(dataUri, hash, width, height) {
            document.getElementById('base64Output').textContent = dataUri;
            document.getElementById('hashOutput').textContent = hash;
            
            const codeTemplate = `// Update these values in Logo.tsx:
const DATA_URI = "${dataUri}";
const W = ${width};  // natural pixel width
const H = ${height}; // natural pixel height  
const EXPECTED_SHA256 = "${hash}";`;
            
            document.getElementById('codeOutput').textContent = codeTemplate;
        }

        async function copyToClipboard(elementId) {
            const text = document.getElementById(elementId).textContent;
            try {
                await navigator.clipboard.writeText(text);
                
                // Show success feedback
                const button = event.target;
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.style.background = 'linear-gradient(to right, #10b981, #059669)';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = 'linear-gradient(to right, #3b82f6, #1d4ed8)';
                }, 2000);
                
            } catch (err) {
                console.error('Failed to copy: ', err);
                alert('Failed to copy to clipboard. Please select and copy manually.');
            }
        }
    </script>
</body>
</html>